<!DOCTYPE html>
<html ng-app="demo">
    <head>
        <title>priority:15-directives</title>
        <script src="https://code.angularjs.org/1.4.8/angular.js"></script>
        <script>
            var demo = angular.module('demo',[]);

            function defineDirective(n) {
                demo.directive('demo'+n, function() {
                    return {
                        restrict: 'A',
                        priority: n,
                        compile: function() {
                            console.log('compile'+n);
                            return {
                                'pre': function preLink() {
                                    console.log('prelink'+n);
                                },
                                'post': function link() {
                                    console.log('link'+n);
                                }
                            };
                        }
                    };
                });
            }

            defineDirective(1);
            defineDirective(2);
            defineDirective(3);
        </script>
    </head>
    <body>
        <div>
            <div demo3 demo1 demo2></div>
            Directives with greater numerical priority are compiled first<br/>
            Check console for details<br/>
        </div>
    </body>
</html>
